{"version":3,"sources":["utils/index.js","reducers/users.js","sagas/index.js","services/Users.js","sagas/users.js","sagas sync /^/.//.*$","components/DynamicNumber.js","container/Home/Item.js","pages/Home.js","routes/index.js","App.js","reducers/index.js","store/index.js","theme/index.js","index.js"],"names":["randomData","data","property","min","max","rate","map","item","value","_","random","length","FETCH_USERS","FETCH_USERS_SUCCESS","FETCH_USERS_ERROR","initialState","lists","loading","error","state","action","type","payload","rootSaga","Sagas","saga","require","default","all","getUsers","a","axios","get","then","res","catch","err","fetchUsers","delay","call","response","status","put","takeLatest","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","DynamicNumber","props","score","useState","setValue","useInterval","propTypes","number","isRequired","Main","styled","div","transitions","Rank","Avatar","DisplayName","Score","Item","displayName","picture","top","rank","style","backgroundImage","main","Home","key","path","exact","component","dispatch","useDispatch","useSelector","users","useEffect","orderBy","userID","index","findIndex","bind","this","title","App","Routes","route","Component","render","Helmet","combineReducers","sagaMiddleware","createSagaMiddleware","createStore","reducers","composeWithDevTools","applyMiddleware","run","DefaultTheme","black","white","gray","blue","green","red","globalFont","screenXs","screenSm","screenMd","screenLg","screenXl","GlobalStyle","createGlobalStyle","p","theme","ReactDOM","store","document","getElementById"],"mappings":"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","file":"static/js/main.b3a0963f.chunk.js","sourcesContent":["import _ from 'lodash';\n\n/**\n * 隨機更新目標欄位數值\n * @param {array} data 資料\n * @param {string} property 目標欄位\n * @param {number} min 最小增加值\n * @param {number} max 最大增加值\n * @param {number} rate 每筆被更新機率 [0-1]\n */\nexport function randomData(data = [], property, min, max, rate) {\n  return data.map((item) => {\n    // 替換機率\n    const pass = _.random(1, data.length) < data.length * rate;\n    const value = pass ? item[property] + _.random(min, max) : item[property];\n    return { ...item, [property]: value };\n  });\n}\n","import { randomData } from '../utils';\n\nexport const FETCH_USERS = 'FETCH_USERS';\nexport const FETCH_USERS_SUCCESS = 'FETCH_USERS_SUCCESS';\nexport const FETCH_USERS_ERROR = 'FETCH_USERS_ERROR';\n\nconst initialState = {\n  lists: [],\n  loading: false,\n  error: null,\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case FETCH_USERS:\n      return { ...state, loading: true };\n    case FETCH_USERS_SUCCESS:\n      const lists = randomData(action.payload, 'score', 500, 2000, 0.4);\n      return { ...state, loading: false, lists };\n    case FETCH_USERS_ERROR:\n      return { ...state, loading: false, error: action.payload };\n    default:\n      return state;\n  }\n}\n","import { all } from 'redux-saga/effects';\n\nconst sagas = [\n  'users'\n];\n\nconst Sagas = sagas.map(saga => require(`./${saga}`).default());\n\nexport default function* rootSaga() {\n  yield all(Sagas);\n}\n","import axios from 'axios';\n\nconst URL = 'https://webcdn.17app.co/campaign/pretest/data.json';\n\n/**\n * FETCH USERS\n */\nexport const getUsers = async () =>\n  await axios.get(URL)\n    .then(res => res)\n    .catch(err => err);\n","import { call, put, takeLatest, delay } from 'redux-saga/effects';\n\nimport { FETCH_USERS, FETCH_USERS_SUCCESS, FETCH_USERS_ERROR } from '../reducers/users';\n\nimport { getUsers } from '../services/Users';\n\nfunction* fetchUsers() {\n  while (true) {\n    yield delay(1000);\n    const response = yield call(getUsers);\n    if (response.status === 200) {\n      yield put({ type: FETCH_USERS_SUCCESS, payload: response.data });\n    } else {\n      yield put({ type: FETCH_USERS_ERROR, payload: response.data });\n    }\n  }\n}\n\nexport default function* () {\n  yield takeLatest(FETCH_USERS, fetchUsers);\n}\n","var map = {\n\t\"./\": 22,\n\t\"./index\": 22,\n\t\"./index.js\": 22,\n\t\"./users\": 43,\n\t\"./users.js\": 43\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 70;","import React, { useState } from 'react';\nimport propTypes from 'prop-types';\nimport { useInterval } from 'react-use';\n\nfunction DynamicNumber(props) {\n\n  const { score } = props;\n\n  const [value, setValue] = useState(0);\n\n  // initial first time\n  if (value === 0) setValue(score);\n\n  useInterval(\n    () => setValue(value + 1),\n    value < score ? 0.5 : null\n  );\n\n  return <>{value}</>;\n}\n\nDynamicNumber.propTypes = {\n  score: propTypes.number.isRequired,\n}\n\nexport default DynamicNumber;\n","import React from 'react';\nimport propTypes from 'prop-types';\nimport styled from 'styled-components';\nimport { transitions } from 'polished';\n\nimport DynamicNumber from '../../components/DynamicNumber';\n\nconst Main = styled.div`\n  position: absolute;\n  left: 0;\n  display: flex;\n  align-items: center;\n  width: 100%;\n  ${transitions(['top'], '.3s ease-in-out')};\n`;\n\nconst Rank = styled.div`\n  width: 20px;\n  text-align: center;\n`;\n\nconst Avatar = styled.div`\n  margin: 0 .5rem;\n  width: 32px;\n  height: 32px;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  border-radius: 100%;\n`;\n\nconst DisplayName = styled.div``;\n\nconst Score = styled.div`\n  flex-grow: 1;\n  text-align: right;\n\n  &::after {\n    content: 'pt';\n  }\n`;\n\nfunction Item(props) {\n\n  const { displayName, picture, score, top, rank } = props;\n\n  return (\n    <Main style={{ top }}>\n      <Rank>{rank}</Rank>\n      <Avatar style={{ backgroundImage: `url(${picture})` }}></Avatar>\n      <DisplayName>{displayName}</DisplayName>\n      <Score><DynamicNumber score={score} /></Score>\n    </Main>\n  )\n}\n\nItem.propTypes = {\n  displayName: propTypes.string.isRequired,\n  picture: propTypes.string.isRequired,\n  score: propTypes.number.isRequired,\n  top: propTypes.string.isRequired,\n  rank: propTypes.number.isRequired,\n}\n\nexport default Item;\n","import React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport styled from 'styled-components';\nimport _ from 'lodash';\n\nimport { FETCH_USERS } from '../reducers/users';\n\nimport Item from '../container/Home/Item';\n\nconst Main = styled.main`\n  position: relative;\n  margin: 1rem auto;\n  width: 300px;\n`;\n\nfunction Home() {\n  const dispatch = useDispatch();\n\n  const { lists } = useSelector(state => state.users);\n\n  useEffect(() => {\n    dispatch({ type: FETCH_USERS });\n  }, [dispatch]);\n\n  const users = _.orderBy(lists, ['score'], ['desc']);\n\n  const renderItem = (item) => {\n    const { userID } = item;\n    // find the index from users\n    const index = _.findIndex(users, { userID });\n\n    const key = `item-${userID}`;\n    const top = `${index * 45}px`;\n    const rank = index + 1;\n    const props = { ...item, key, top, rank };\n\n    return (<Item {...props} />);\n  }\n\n  return (\n    <Main>\n      {lists.map(renderItem.bind(this))}\n    </Main>\n  )\n}\n\nexport default Home;\n","import Home from '../pages/Home';\n\nexport default [\n  {\n    key: 'root',\n    path: '/',\n    exact: true,\n    component: Home,\n    title: 'campaign',\n  },\n]\n","import React from 'react';\nimport { Switch, HashRouter as Router, Route } from 'react-router-dom';\nimport { Helmet } from 'react-helmet';\n\nimport Routes from './routes';\n\nfunction App() {\n  const renderRoute = route => {\n    const { key, path, exact, component: Component, title } = route;\n    return (\n      <Route\n        key={key}\n        exact={exact}\n        path={path}\n        title={title}\n        render={props => (\n          <>\n            <Helmet>\n              <title>{title}</title>\n            </Helmet>\n            <Component {...props} />\n          </>\n        )}\n      />\n    );\n  }\n\n  return (\n    <Router>\n      <Switch>\n        {Routes.map(renderRoute)}\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","import { combineReducers } from 'redux';\n\nimport users from './users';\n\nexport default combineReducers({\n  users,\n})\n","import { createStore, applyMiddleware } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\n// import thunk from 'redux-thunk';\nimport { composeWithDevTools } from 'redux-devtools-extension';\n\nimport reducers from '../reducers';\nimport rootSaga from '../sagas';\n\nconst sagaMiddleware = createSagaMiddleware();\n\nexport default createStore(\n  reducers,\n  composeWithDevTools(\n    applyMiddleware(sagaMiddleware),\n  )\n);\n\nsagaMiddleware.run(rootSaga);\n","const color = {\n  black: '#111',\n  white: '#fefefe',\n  gray: '#87868c',\n  blue: '#1e78a9',\n  green: '#009f9d',\n  red: '#f2724f',\n}\n\nconst font = {\n  globalFont: `'Microsoft JhengHei', 'Segoe UI', Helvetica, Arial, Helvetica, sans-serif;`,\n}\n\nconst screen = {\n  screenXs: '480px',\n  screenSm: '576px',\n  screenMd: '768px',\n  screenLg: '992px',\n  screenXl: '1200px',\n}\n\nexport const DefaultTheme = {\n  ...color,\n  ...font,\n  ...screen,\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { ThemeProvider, createGlobalStyle } from 'styled-components';\n\nimport App from './App';\nimport store from './store';\nimport { DefaultTheme } from './theme';\n\nconst GlobalStyle = createGlobalStyle`\n\n  *,\n  ::after,\n  ::before {\n    box-sizing: border-box;\n  }\n\n  html,\n  body {\n    margin: 0;\n    padding: 0;\n    font-family: ${p => p.theme.globalFont};\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n`;\n\nReactDOM.render(\n  <ThemeProvider theme={DefaultTheme}>\n    <GlobalStyle />\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </ThemeProvider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}